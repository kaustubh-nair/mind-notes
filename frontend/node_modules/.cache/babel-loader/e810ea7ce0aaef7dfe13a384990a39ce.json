{"ast":null,"code":"import _slicedToArray from \"/home/kau/projects/acad/spe/mind-note-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kau/projects/acad/spe/mind-note-frontend/src/components/allbooks.component.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport axios from 'axios';\nimport { variables } from \"../urls.js\";\n\nfunction useForceUpdate() {\n  let _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setState = _useState2[1];\n\n  return () => setState(!value);\n}\n\nlet renderedBooks = \"\";\n\nfunction AllBooks({\n  getToken\n}) {\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        books = _useState4[0],\n        setBooks = _useState4[1];\n\n  const forceUpdate = useForceUpdate();\n\n  const fetchBooks = async () => {\n    const url = variables.serverUrl + variables.fetchBooksEndpoint;\n    const token = getToken();\n    const response = await axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token.access\n      },\n      crossDomain: false,\n      params: {\n        user_id: '1'\n      }\n    });\n    setBooks(response.data);\n    console.log(response.data);\n  };\n\n  useEffect(() => {\n    setRenderedBooks();\n  }, [books]);\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n\n  function setRenderedBooks() {\n    console.debug(books);\n\n    if (books) {\n      renderedBooks = [];\n\n      for (var i = 0; i < books.length; i++) {\n        renderedBooks.push(React.createElement(\"div\", {\n          className: \"book-card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        }, books[i].title)));\n      }\n\n      console.log(renderedBooks);\n      console.log(typeof renderedBooks);\n      forceUpdate();\n    } else {\n      renderedBooks = \"\";\n    }\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"h3\", {\n    className: \"header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"My Books\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, renderedBooks));\n}\n\nexport default AllBooks;","map":{"version":3,"sources":["/home/kau/projects/acad/spe/mind-note-frontend/src/components/allbooks.component.js"],"names":["React","useState","useEffect","Redirect","axios","variables","useForceUpdate","value","setState","renderedBooks","AllBooks","getToken","books","setBooks","forceUpdate","fetchBooks","url","serverUrl","fetchBooksEndpoint","token","response","get","headers","Authorization","access","crossDomain","params","user_id","data","console","log","setRenderedBooks","debug","i","length","push","title"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAwB,kBAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,QAAwB,YAAxB;;AAEA,SAASC,cAAT,GAAyB;AAAA,kBACCL,QAAQ,CAAC,IAAD,CADT;AAAA;AAAA,MAClBM,KADkB;AAAA,MACXC,QADW;;AAEvB,SAAO,MAAMA,QAAQ,CAAC,CAACD,KAAF,CAArB;AACD;;AACD,IAAIE,aAAa,GAAG,EAApB;;AAEA,SAASC,QAAT,CAAkB;AAACC,EAAAA;AAAD,CAAlB,EAA8B;AAAA,qBACFV,QAAQ,CAAC,IAAD,CADN;AAAA;AAAA,QACrBW,KADqB;AAAA,QACdC,QADc;;AAE5B,QAAMC,WAAW,GAAGR,cAAc,EAAlC;;AAGA,QAAMS,UAAU,GAAG,YAAY;AAC7B,UAAMC,GAAG,GAAGX,SAAS,CAACY,SAAV,GAAsBZ,SAAS,CAACa,kBAA5C;AACA,UAAMC,KAAK,GAAGR,QAAQ,EAAtB;AACA,UAAMS,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAN,CAAUL,GAAV,EAAe;AAAEM,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAE,YAAYJ,KAAK,CAACK;AAAnC,OAAX;AAAwDC,MAAAA,WAAW,EAAE,KAArE;AAA4EC,MAAAA,MAAM,EAAE;AAACC,QAAAA,OAAO,EAAE;AAAV;AAApF,KAAf,CAAvB;AACAd,IAAAA,QAAQ,CAACO,QAAQ,CAACQ,IAAV,CAAR;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYV,QAAQ,CAACQ,IAArB;AACD,GAND;;AAQA1B,EAAAA,SAAS,CAAC,MAAM;AACd6B,IAAAA,gBAAgB;AAClB,GAFS,EAEP,CAACnB,KAAD,CAFO,CAAT;AAIAV,EAAAA,SAAS,CAAC,MAAM;AACfa,IAAAA,UAAU;AACX,GAFS,EAEP,EAFO,CAAT;;AAKA,WAASgB,gBAAT,GAA4B;AAC1BF,IAAAA,OAAO,CAACG,KAAR,CAAcpB,KAAd;;AACA,QAAIA,KAAJ,EAAW;AACTH,MAAAA,aAAa,GAAG,EAAhB;;AACA,WAAI,IAAIwB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGrB,KAAK,CAACsB,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCxB,QAAAA,aAAa,CAAC0B,IAAd,CACE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGvB,KAAK,CAACqB,CAAD,CAAL,CAASG,KADZ,CADF,CADF;AAMD;;AACDP,MAAAA,OAAO,CAACC,GAAR,CAAYrB,aAAZ;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAOrB,aAAnB;AACAK,MAAAA,WAAW;AACZ,KAbD,MAcK;AACHL,MAAAA,aAAa,GAAG,EAAhB;AACD;AACF;;AAGD,SACE,0CACE;AAAI,IAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCA,aADD,CAFF,CADF;AAQD;;AAED,eAAeC,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Redirect} from \"react-router-dom\";\nimport axios from 'axios';\nimport {variables} from \"../urls.js\";\n\nfunction useForceUpdate(){\n  let [value, setState] = useState(true);\n  return () => setState(!value);\n}\nlet renderedBooks = \"\";\n\nfunction AllBooks({getToken}) {\n  const [books, setBooks] = useState(null);\n  const forceUpdate = useForceUpdate();\n\n\n  const fetchBooks = async () => {\n    const url = variables.serverUrl + variables.fetchBooksEndpoint;\n    const token = getToken();\n    const response = await axios.get(url, { headers: { Authorization: 'Bearer ' + token.access }, crossDomain: false, params: {user_id: '1'}});\n    setBooks(response.data);\n    console.log(response.data);\n  }\n\n  useEffect(() => {\n    setRenderedBooks();\n\t}, [books]);\n\n  useEffect(() => {\n\t  fetchBooks();\n\t}, []);\n\n\n  function setRenderedBooks() {\n    console.debug(books);\n    if (books) {\n      renderedBooks = [];\n      for(var i = 0; i < books.length; i++) {\n        renderedBooks.push(\n          <div className=\"book-card\">\n            <div>\n              {books[i].title}\n            </div>\n          </div>);\n      }\n      console.log(renderedBooks);\n      console.log(typeof(renderedBooks));\n      forceUpdate();\n    }\n    else {\n      renderedBooks = \"\";\n    }\n  }\n\n\n  return (\n    <>\n      <h3 className=\"header\">My Books</h3>\n      <div>\n      {renderedBooks}\n      </div>\n    </>\n  );\n}\n\nexport default AllBooks\n"]},"metadata":{},"sourceType":"module"}