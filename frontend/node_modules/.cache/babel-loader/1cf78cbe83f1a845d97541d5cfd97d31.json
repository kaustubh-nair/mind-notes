{"ast":null,"code":"import _slicedToArray from \"/home/kau/projects/acad/spe/mind-note-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kau/projects/acad/spe/mind-note-frontend/src/components/allbooks.component.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport axios from 'axios';\nimport { variables } from \"../urls.js\";\nexport default function AllBooks({\n  getToken\n}) {\n  const _useState = useState([{\n    title: \"ASD\"\n  }]),\n        _useState2 = _slicedToArray(_useState, 2),\n        books = _useState2[0],\n        setBooks = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        state = _useState4[0],\n        setState = _useState4[1];\n\n  const forceRerender = () => setState(state + 1);\n\n  function useForceUpdate() {\n    const _useState5 = useState(0),\n          _useState6 = _slicedToArray(_useState5, 2),\n          value = _useState6[0],\n          setValue = _useState6[1]; // integer state\n\n\n    return () => setValue(value => value + 1); // update the state to force render\n  }\n\n  const fetchBooks = async () => {\n    const url = variables.serverUrl + variables.fetchBooksEndpoint;\n    const token = getToken();\n    const response = await axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token.access\n      },\n      crossDomain: false,\n      params: {\n        user_id: '1'\n      }\n    });\n    setBooks(response.data);\n  };\n\n  useEffect(() => {\n    setRenderedBooks();\n  }, [books]);\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n  var renderedBooks;\n\n  function setRenderedBooks() {\n    console.debug(books);\n\n    if (books) {\n      renderedBooks = books[0].title;\n      console.log(renderedBooks);\n      forceRerender();\n    } else {\n      renderedBooks = [];\n    }\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"h3\", {\n    class: \"header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"My Books\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Asd\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, renderedBooks));\n}","map":{"version":3,"sources":["/home/kau/projects/acad/spe/mind-note-frontend/src/components/allbooks.component.js"],"names":["React","useState","useEffect","Redirect","axios","variables","AllBooks","getToken","title","books","setBooks","state","setState","forceRerender","useForceUpdate","value","setValue","fetchBooks","url","serverUrl","fetchBooksEndpoint","token","response","get","headers","Authorization","access","crossDomain","params","user_id","data","setRenderedBooks","renderedBooks","console","debug","log"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAwB,kBAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,QAAwB,YAAxB;AAEA,eAAe,SAASC,QAAT,CAAkB;AAACC,EAAAA;AAAD,CAAlB,EAA8B;AAAA,oBACjBN,QAAQ,CAAC,CAAC;AAACO,IAAAA,KAAK,EAAE;AAAR,GAAD,CAAD,CADS;AAAA;AAAA,QACpCC,KADoC;AAAA,QAC7BC,QAD6B;;AAAA,qBAEjBT,QAAQ,CAAC,CAAD,CAFS;AAAA;AAAA,QAEpCU,KAFoC;AAAA,QAE7BC,QAF6B;;AAG3C,QAAMC,aAAa,GAAG,MAAMD,QAAQ,CAACD,KAAK,GAAC,CAAP,CAApC;;AACA,WAASG,cAAT,GAAyB;AAAA,uBACGb,QAAQ,CAAC,CAAD,CADX;AAAA;AAAA,UAChBc,KADgB;AAAA,UACTC,QADS,kBACgB;;;AACvC,WAAO,MAAMA,QAAQ,CAACD,KAAK,IAAIA,KAAK,GAAG,CAAlB,CAArB,CAFuB,CAEoB;AAC9C;;AAGC,QAAME,UAAU,GAAG,YAAY;AAC7B,UAAMC,GAAG,GAAGb,SAAS,CAACc,SAAV,GAAsBd,SAAS,CAACe,kBAA5C;AACA,UAAMC,KAAK,GAAGd,QAAQ,EAAtB;AACA,UAAMe,QAAQ,GAAG,MAAMlB,KAAK,CAACmB,GAAN,CAAUL,GAAV,EAAe;AAAEM,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAE,YAAYJ,KAAK,CAACK;AAAnC,OAAX;AAAwDC,MAAAA,WAAW,EAAE,KAArE;AAA4EC,MAAAA,MAAM,EAAE;AAACC,QAAAA,OAAO,EAAE;AAAV;AAApF,KAAf,CAAvB;AACAnB,IAAAA,QAAQ,CAACY,QAAQ,CAACQ,IAAV,CAAR;AACD,GALD;;AAOA5B,EAAAA,SAAS,CAAC,MAAM;AACd6B,IAAAA,gBAAgB;AAClB,GAFS,EAEP,CAACtB,KAAD,CAFO,CAAT;AAIAP,EAAAA,SAAS,CAAC,MAAM;AACfe,IAAAA,UAAU;AACX,GAFS,EAEP,EAFO,CAAT;AAIA,MAAIe,aAAJ;;AAEA,WAASD,gBAAT,GAA4B;AAC1BE,IAAAA,OAAO,CAACC,KAAR,CAAczB,KAAd;;AACA,QAAIA,KAAJ,EAAW;AACTuB,MAAAA,aAAa,GAAGvB,KAAK,CAAC,CAAD,CAAL,CAASD,KAAzB;AACAyB,MAAAA,OAAO,CAACE,GAAR,CAAYH,aAAZ;AACAnB,MAAAA,aAAa;AACd,KAJD,MAKK;AACHmB,MAAAA,aAAa,GAAG,EAAhB;AACD;AACF;;AAED,SACE,0CACE;AAAI,IAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,aADH,CALF,CADF;AAWD","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Redirect} from \"react-router-dom\";\nimport axios from 'axios';\nimport {variables} from \"../urls.js\";\n\nexport default function AllBooks({getToken}) {\n  const [books, setBooks] = useState([{title: \"ASD\"}]);\n  const [state, setState] = useState(0);\n  const forceRerender = () => setState(state+1);\n  function useForceUpdate(){\n    const [value, setValue] = useState(0); // integer state\n    return () => setValue(value => value + 1); // update the state to force render\n}\n\n\n  const fetchBooks = async () => {\n    const url = variables.serverUrl + variables.fetchBooksEndpoint;\n    const token = getToken();\n    const response = await axios.get(url, { headers: { Authorization: 'Bearer ' + token.access }, crossDomain: false, params: {user_id: '1'}});\n    setBooks(response.data);\n  }\n\n  useEffect(() => {\n    setRenderedBooks();\n\t}, [books]);\n\n  useEffect(() => {\n\t  fetchBooks();\n\t}, []);\n\n  var renderedBooks;\n\n  function setRenderedBooks() {\n    console.debug(books);\n    if (books) {\n      renderedBooks = books[0].title;\n      console.log(renderedBooks);\n      forceRerender();\n    }\n    else {\n      renderedBooks = [];\n    }\n  }\n\n  return (\n    <>\n      <h3 class=\"header\">My Books</h3>\n      <div>\n    Asd\n      </div>\n      <div>\n        {renderedBooks}\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}