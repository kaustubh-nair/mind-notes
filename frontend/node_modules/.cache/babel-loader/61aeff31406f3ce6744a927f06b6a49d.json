{"ast":null,"code":"import _slicedToArray from \"/home/kau/projects/acad/spe/mind-note-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kau/projects/acad/spe/mind-note-frontend/src/components/allbooks.component.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect, BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport { variables } from \"../urls.js\";\nimport Book from \"./book.component.js\";\n\nfunction useForceUpdate() {\n  let _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setState = _useState2[1];\n\n  return () => setState(!value);\n}\n\nlet renderedBooks = \"\";\n\nfunction AllBooks({\n  getToken,\n  setMainPage\n}) {\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        books = _useState4[0],\n        setBooks = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        bookId = _useState6[0],\n        setBookId = _useState6[1];\n\n  const forceUpdate = useForceUpdate();\n\n  const fetchBooks = async () => {\n    const url = variables.serverUrl + variables.fetchBooksEndpoint;\n    const token = getToken();\n    const response = await axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token.access\n      },\n      crossDomain: false,\n      params: {\n        user_id: '1'\n      }\n    });\n    setBooks(response.data);\n    console.log(response.data);\n  };\n\n  useEffect(() => {\n    setRenderedBooks();\n  }, [books]);\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n\n  function getTagCards(tags) {\n    var t = [];\n\n    for (var i in tags) {\n      t.push(React.createElement(\"div\", {\n        className: \"pill\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, tags[i].name));\n    }\n\n    return t;\n  }\n\n  function isPublic(is_public) {\n    if (is_public) return \"checked\";\n  }\n\n  function openCard() {\n    console.log(\"ADS\");\n  }\n\n  function setBook(e) {\n    setBookId(e.target.id);\n  }\n\n  function setRenderedBooks() {\n    console.debug(books);\n\n    if (books) {\n      renderedBooks = [];\n\n      for (var i = 0; i < books.length; i++) {\n        renderedBooks.push(React.createElement(\"div\", {\n          className: \"book-card row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"column\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, React.createElement(Link, {\n          onClick: setBook,\n          className: \"title\",\n          to: \"/book/notes\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          id: books[i].id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, books[i].title))), React.createElement(\"div\", {\n          className: \"description\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, books[i].description)), React.createElement(\"div\", {\n          className: \"column-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"book-card-public\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"switch\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          checked: isPublic(books[i].is_public),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"slider round\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"book-card-tags\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, getTagCards(books[i].tags)))));\n      }\n\n      console.log(renderedBooks);\n      console.log(typeof renderedBooks);\n      forceUpdate();\n    } else {\n      renderedBooks = \"\";\n    }\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(Router, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"My Books\"), React.createElement(\"div\", {\n    className: \"books\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, renderedBooks), React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/book/notes\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Book, {\n    getToken: getToken,\n    bookId: bookId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  })))));\n}\n\nexport default AllBooks;","map":{"version":3,"sources":["/home/kau/projects/acad/spe/mind-note-frontend/src/components/allbooks.component.js"],"names":["React","useState","useEffect","Redirect","BrowserRouter","Router","Switch","Route","Link","axios","variables","Book","useForceUpdate","value","setState","renderedBooks","AllBooks","getToken","setMainPage","books","setBooks","bookId","setBookId","forceUpdate","fetchBooks","url","serverUrl","fetchBooksEndpoint","token","response","get","headers","Authorization","access","crossDomain","params","user_id","data","console","log","setRenderedBooks","getTagCards","tags","t","i","push","name","isPublic","is_public","openCard","setBook","e","target","id","debug","length","title","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Redirect, BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport {variables} from \"../urls.js\";\nimport Book from \"./book.component.js\";\n\nfunction useForceUpdate(){\n  let [value, setState] = useState(true);\n  return () => setState(!value);\n}\nlet renderedBooks = \"\";\n\nfunction AllBooks({getToken, setMainPage}) {\n  const [books, setBooks] = useState(null);\n  const [bookId, setBookId] = useState(null);\n  const forceUpdate = useForceUpdate();\n\n\n  const fetchBooks = async () => {\n    const url = variables.serverUrl + variables.fetchBooksEndpoint;\n    const token = getToken();\n    const response = await axios.get(url, { headers: { Authorization: 'Bearer ' + token.access }, crossDomain: false, params: {user_id: '1'}});\n    setBooks(response.data);\n    console.log(response.data);\n  }\n\n  useEffect(() => {\n    setRenderedBooks();\n\t}, [books]);\n\n  useEffect(() => {\n\t  fetchBooks();\n\t}, []);\n\n\n  function getTagCards(tags) {\n    var t = [];\n    for (var i in tags) {\n      t.push(\n        <div className=\"pill\">\n          {tags[i].name}\n        </div>\n      );\n    }\n    return t;\n  }\n\n  function isPublic(is_public) {\n    if (is_public) \n      return \"checked\";\n  }\n\n  function openCard() {\n    console.log(\"ADS\");\n  }\n\n  function setBook (e) {\n    setBookId(e.target.id);\n  }\n\n  function setRenderedBooks() {\n    console.debug(books);\n    if (books) {\n      renderedBooks = [];\n      for(var i = 0; i < books.length; i++) {\n        renderedBooks.push(\n          <div className=\"book-card row\">\n            <div className=\"column\">\n                <div>\n                    <Link onClick={setBook} className=\"title\" to=\"/book/notes\" >\n                      <h4 id={books[i].id}>\n                          {books[i].title}\n                  \n                      </h4>\n                    </Link> \n                </div>\n                <div className=\"description\">\n                  {books[i].description}\n                </div>\n              \n            </div>\n            <div className=\"column-right\">\n              <div className=\"book-card-public\">\n                  <label className=\"switch\">\n                    <input type=\"checkbox\" checked={isPublic(books[i].is_public)}></input>\n                    <span className=\"slider round\"></span>\n                  </label>\n              </div>\n              <div className=\"book-card-tags\">\n                  {getTagCards(books[i].tags)}\n              </div>\n            </div>\n          </div>);\n      }\n      console.log(renderedBooks);\n      console.log(typeof(renderedBooks));\n      forceUpdate();\n    }\n    else {\n      renderedBooks = \"\";\n    }\n  }\n\n\n  return (\n    <>\n      <Router>\n      \n        <h3 className=\"header\">My Books</h3>\n          <div className=\"books\">\n            {renderedBooks}\n          </div>\n          <Switch>\n            <Route path='/book/notes'>\n              <Book getToken={getToken} bookId={bookId}/>\n            </Route>\n          </Switch>\n      \n      </Router>\n    </>\n  );\n}\n\nexport default AllBooks\n"]},"metadata":{},"sourceType":"module"}