{"ast":null,"code":"import _slicedToArray from \"/home/kau/projects/acad/spe/mind-note-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kau/projects/acad/spe/mind-note-frontend/src/components/feed.component.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\nimport { variables } from \"../urls.js\";\n\nfunction useForceUpdate() {\n  let _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setState = _useState2[1];\n\n  return () => setState(!value);\n}\n\nlet renderedFeed = \"\";\n\nfunction Feed({\n  getToken,\n  setBookId\n}) {\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        feed = _useState4[0],\n        setFeed = _useState4[1];\n\n  const forceUpdate = useForceUpdate();\n\n  const fetchFeed = async () => {\n    const url = variables.serverUrl + variables.fetchFeedEndpoint;\n    const token = getToken();\n    const response = await axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token.access\n      },\n      crossDomain: false,\n      params: {\n        user_id: '1'\n      }\n    });\n    setFeed(response.data);\n  };\n\n  useEffect(() => {\n    fetchFeed();\n  }, []);\n\n  function renderFeed() {\n    console.debug(books);\n\n    if (feeds) {\n      renderedFeed = [];\n\n      for (var i = 0; i < books.length; i++) {\n        renderedFeed.push(React.createElement(\"div\", {\n          className: \"book-card row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"column\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, React.createElement(Link, {\n          className: \"title\",\n          to: \"/book/\" + books[i].id + \"/notes\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          id: books[i].id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        }, books[i].title))), React.createElement(\"div\", {\n          className: \"description\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, books[i].description)), React.createElement(\"div\", {\n          className: \"column-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"book-card-tags\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, getTagCards(books[i].tags)))));\n      }\n\n      console.log(renderedFeed);\n      console.log(typeof renderedFeed);\n      forceUpdate();\n    } else {\n      renderedFeed = \"\";\n    }\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"feed\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, renderedFeed));\n}\n\nexport default Feed;","map":{"version":3,"sources":["/home/kau/projects/acad/spe/mind-note-frontend/src/components/feed.component.js"],"names":["React","useState","useEffect","axios","Redirect","variables","useForceUpdate","value","setState","renderedFeed","Feed","getToken","setBookId","feed","setFeed","forceUpdate","fetchFeed","url","serverUrl","fetchFeedEndpoint","token","response","get","headers","Authorization","access","crossDomain","params","user_id","data","renderFeed","console","debug","books","feeds","i","length","push","id","title","description","getTagCards","tags","log"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAwB,kBAAxB;AACA,SAAQC,SAAR,QAAwB,YAAxB;;AAEA,SAASC,cAAT,GAAyB;AAAA,kBACCL,QAAQ,CAAC,IAAD,CADT;AAAA;AAAA,MAClBM,KADkB;AAAA,MACXC,QADW;;AAEvB,SAAO,MAAMA,QAAQ,CAAC,CAACD,KAAF,CAArB;AACD;;AAED,IAAIE,YAAY,GAAG,EAAnB;;AAEA,SAASC,IAAT,CAAc;AAACC,EAAAA,QAAD;AAAWC,EAAAA;AAAX,CAAd,EAAqC;AAAA,qBACXX,QAAQ,CAAC,IAAD,CADG;AAAA;AAAA,QAC5BY,IAD4B;AAAA,QACtBC,OADsB;;AAEnC,QAAMC,WAAW,GAAGT,cAAc,EAAlC;;AAEA,QAAMU,SAAS,GAAG,YAAY;AAC5B,UAAMC,GAAG,GAAGZ,SAAS,CAACa,SAAV,GAAsBb,SAAS,CAACc,iBAA5C;AACA,UAAMC,KAAK,GAAGT,QAAQ,EAAtB;AACA,UAAMU,QAAQ,GAAG,MAAMlB,KAAK,CAACmB,GAAN,CAAUL,GAAV,EAAe;AAAEM,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAE,YAAYJ,KAAK,CAACK;AAAnC,OAAX;AAAwDC,MAAAA,WAAW,EAAE,KAArE;AAA4EC,MAAAA,MAAM,EAAE;AAACC,QAAAA,OAAO,EAAE;AAAV;AAApF,KAAf,CAAvB;AACAd,IAAAA,OAAO,CAACO,QAAQ,CAACQ,IAAV,CAAP;AACD,GALD;;AAQA3B,EAAAA,SAAS,CAAC,MAAM;AACdc,IAAAA,SAAS;AACX,GAFS,EAEP,EAFO,CAAT;;AAIA,WAASc,UAAT,GAAsB;AACpBC,IAAAA,OAAO,CAACC,KAAR,CAAcC,KAAd;;AACA,QAAIC,KAAJ,EAAW;AACTzB,MAAAA,YAAY,GAAG,EAAf;;AACA,WAAI,IAAI0B,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGF,KAAK,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC1B,QAAAA,YAAY,CAAC4B,IAAb,CACE;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,IAAD;AAAM,UAAA,SAAS,EAAC,OAAhB;AAAwB,UAAA,EAAE,EAAE,WAAWJ,KAAK,CAACE,CAAD,CAAL,CAASG,EAApB,GAAyB,QAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAI,UAAA,EAAE,EAAEL,KAAK,CAACE,CAAD,CAAL,CAASG,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKL,KAAK,CAACE,CAAD,CAAL,CAASI,KADd,CADF,CADJ,CADJ,EASI;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGN,KAAK,CAACE,CAAD,CAAL,CAASK,WADZ,CATJ,CADF,EAeE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKC,WAAW,CAACR,KAAK,CAACE,CAAD,CAAL,CAASO,IAAV,CADhB,CADF,CAfF,CADF;AAsBD;;AACDX,MAAAA,OAAO,CAACY,GAAR,CAAYlC,YAAZ;AACAsB,MAAAA,OAAO,CAACY,GAAR,CAAY,OAAOlC,YAAnB;AACAM,MAAAA,WAAW;AACZ,KA7BD,MA8BK;AACHN,MAAAA,YAAY,GAAG,EAAf;AACD;AAEF;;AACD,SACE,0CACM;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,YADH,CADN,CADF;AASD;;AAED,eAAeC,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Redirect} from \"react-router-dom\";\nimport {variables} from \"../urls.js\";\n\nfunction useForceUpdate(){\n  let [value, setState] = useState(true);\n  return () => setState(!value);\n}\n\nlet renderedFeed = \"\";\n\nfunction Feed({getToken, setBookId}) {\n  const [feed, setFeed] = useState(null);\n  const forceUpdate = useForceUpdate();\n\n  const fetchFeed = async () => {\n    const url = variables.serverUrl + variables.fetchFeedEndpoint;\n    const token = getToken();\n    const response = await axios.get(url, { headers: { Authorization: 'Bearer ' + token.access }, crossDomain: false, params: {user_id: '1'}});\n    setFeed(response.data);\n  }\n\n\n  useEffect(() => {\n    fetchFeed();\n\t}, []);\n\n  function renderFeed() {\n    console.debug(books);\n    if (feeds) {\n      renderedFeed = [];\n      for(var i = 0; i < books.length; i++) {\n        renderedFeed.push(\n          <div className=\"book-card row\">\n            <div className=\"column\">\n                <div>\n                    <Link className=\"title\" to={\"/book/\" + books[i].id + \"/notes\"} >\n                      <h4 id={books[i].id}>\n                          {books[i].title}\n                  \n                      </h4>\n                    </Link> \n                </div>\n                <div className=\"description\">\n                  {books[i].description}\n                </div>\n              \n            </div>\n            <div className=\"column-right\">\n              <div className=\"book-card-tags\">\n                  {getTagCards(books[i].tags)}\n              </div>\n            </div>\n          </div>);\n      }\n      console.log(renderedFeed);\n      console.log(typeof(renderedFeed));\n      forceUpdate();\n    }\n    else {\n      renderedFeed = \"\";\n    }\n\n  }\n  return (\n    <>\n          <div className=\"feed\">\n            {renderedFeed}\n          </div>\n    </>\n\n  )\n\n}\n\nexport default Feed;\n"]},"metadata":{},"sourceType":"module"}